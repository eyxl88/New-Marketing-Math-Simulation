print(f"Welcome to the Market Share and Market Size\n")

import random

class CompanyInfo:

    def __init__(self, lower_sales_units, upper_sales_units, price_lower, price_higher):
        self.sales_units = random.randint(lower_sales_units, upper_sales_units)
        self.selling_price = random.randint(price_lower, price_higher)
        self.sales_dollars = self.sales_units * self.selling_price

    change_in_sales = random.randint(1000, 100000)
    plus_minus = random.randint(0,1)
    if plus_minus == 0:
        change_in_sales = -change_in_sales

my_company = CompanyInfo(50000, 100000, 2, 10)
lead_competition = CompanyInfo(200000, 400000, 6, 18)
competitor = CompanyInfo(8000, 20000, 2, 10)

class TotalInfo:
    def __init__(self):
        self.sales_units = my_company.sales_units + lead_competition.sales_units + competitor.sales_units
        self.sales_dollars = my_company.sales_dollars + lead_competition.sales_dollars + competitor.sales_dollars

class ProblemAnswers:
    def __init__(self, class_name):
        self.rel_ms = class_name.sales_dollars / lead_competitor.sales_dollars * 100
        self.ms_dollars = class_name.sales_dollars / total.sales_dollars * 100
        self.ms_units = class_name.sales_units / total.sales_units * 100

my_answers = ProblemAnswers(my_company)
competitor_answers = ProblemAnswers(competitor)
lead_answers = ProblemAnswers(lead_competition)

last_year_sales = total_sales_dollars + change_in_sales
market_growth = ((total_sales_dollars - last_year_sales) / last_year_sales) * 100

# Relative Market Share # Didn't change because I'm just cleaning up back end code.
print(f"Company:\t\tSales in dollars ($)")
print("_" * 50)
print(f"You:\t\t\t${my_company.sales_dollars:,d}")
print(f"Company B:\t\t${competitor.sales_dollars:,d}")
print(f"Lead Competitor:\t${lead_competition.sales_dollars:,d}")

class CommaError(Exception):
    pass
class DollarSignError(Exception):
    pass
class PercentError:
    pass

def get_user_input(print_message):
    print(print_message, end="")
    user_input = input()
    while user_input != "give up":
        try:
            if "," in user_input:
                raise CommaError("Invalid input. Do not enter the , sign")
            if "%" in user_input:
                raise PercentError("Invalid input. Do not enter the % sign.")
            if "$" in user_input:
                raise DollarSignError("Invalid Input. Do not enter the $ sign.")
            user_input = float(user_input)
            return user_input

        except CommaError as excpt:
              print(excpt)
              user_input = input()
        except PercentError as excpt:
              print(excpt)
              user_input = input()
        except DollarSignError as excpt:
              print(excpt)
              user_input = input()d
        except:
              print("Invalid Entry.")

class AnswerMessages:
    def __init__(self):
        self.correct = None
        self.try_again
        self.wrong = None
    def print_msg(self, boolean):
        if boolean == True:
            print(self.correct)
        if boolean == False:
            print(self.wrong)

def check_rel_ms(value, class_name):
    value_low = class_name.rel_ms - 0.005
    value_high = class_name.rel_ms + 0.005
    if value_low < value < value_high:
        rel_ms.print_msg(True)
    else:
        rel_ms.
      
    
#My Relative Market Share
print()
user_my_rel_ms = get_user_input("Enter YOUR company's relative market share as a percentage up to 2 decimal places: ")
check_answer(user_my_rel_ms, my_company)

if my_rel_ms_low < user_my_rel_ms < my_rel_ms_high:
    print(f"Correct! The Relative Market Share is {my_rel_ms:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_my_rel_ms = float(input())
    if my_rel_ms_low < user_my_rel_ms < my_rel_ms_high:
         print(f"Correct! The Relative Market Share is {my_rel_ms:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_my_rel_ms = float(input())
         if my_rel_ms_low < user_my_rel_ms < my_rel_ms_high:
              print(f"Correct! The Relative Market Share is {my_rel_ms:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Relative Market Share was {my_rel_ms:.3f}% rounded up or down as necessary.")
              print(f"Relative Market Share is your sales in dollars divided by your lead competitor's sales in dollars.")
              print(f"In this case, that is {my_sales_dollars} / {lead_sales_dollars} * 100 to convert to a percent.")
              print(f"You can ignore other companies besides the company the question is asking for and the lead competitor.")

# Competitor's Relative Market Share
print()
user_competitor_rel_ms = float(input("Enter Company B's relative market share as a percentage: "))

competitor_rel_ms_low = competitor_rel_ms - 0.005
competitor_rel_ms_high = competitor_rel_ms + 0.005

if competitor_rel_ms_low < user_competitor_rel_ms < competitor_rel_ms_high:
    print(f"Correct! Company B's Relative Market Share is {competitor_rel_ms:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_my_rel_ms = float(input())
    if competitor_rel_ms_low < user_competitor_rel_ms < competitor_rel_ms_high:
         print(f"Correct! Company B's Relative Market Share is {competitor_rel_ms:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_my_rel_ms = float(input())
         if competitor_rel_ms_low < user_competitor_rel_ms < competitor_rel_ms_high:
              print(f"Correct! Company B's Relative Market Share is {competitor_rel_ms:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Relative Market Share for Company B was {competitor_rel_ms:.3f}% rounded up or down as necessary.")
              print(f"Company B's Relative Market Share is Company B's sales in dollars divided by the lead competitor's sales in dollars.")
              print(f"In this case, that is {competitor_sales_dollars} / {lead_sales_dollars} * 100 to convert to a percent.")
              print(f"You can ignore other companies besides Company B and the lead competitor.")


# Market Growth Rate
print()
print(f"Last year's total sales in the industry were: ${last_year_sales}")
print(f"Calculate this year's total sales based on the previously provided information.")
print(f"Assume there are no competitors in the market besides Your Company, Company B, and the Lead Competitor.")

user_total_sales = int(input("$"))

if user_total_sales == total_sales_dollars:
    print(f"Correct! The total sales in the industry fot this year is ${total_sales_dollars}.")
else:
    print("Try again.")
    user_total_sales = float(input("$"))
    if user_total_sales == total_sales_dollars:
        print(f"Correct! The total sales in the industry for this year is ${total_sales_dollars}.")
    else:
        print("Try again. Last try.")
        user_total_sales = float(input("$"))
        if user_total_sales == total_sales_dollars:
            print(f"Correct! The total sales in the industry for this year is ${total_sales_dollars}.")
        else:
            print(f"The correct total sales was ${total_sales_dollars}.")
            print(f"This is Your Company's sales {my_sales_dollars} + Company B's Sales {competitor_sales_dollars} + Lead Competitor's Sales {lead_sales_dollars}")

user_market_growth = float(input("Enter the market growth/shrink rate as a percentage rounded to 2 decimal places: "))

market_growth_low = market_growth - 0.005
market_growth_high = market_growth + 0.005

if market_growth_low < user_market_growth < market_growth_high:
    print(f"Correct! The Market Growth Rate is {market_growth:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_market_growth = float(input())
    if market_growth_low < user_market_growth < market_growth_high:
         print(f"Correct! The Market Growth Rate is {market_growth:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_market_growth = float(input())
         if market_growth_low < user_market_growth < market_growth_high:
              print(f"Correct! The Market Growth Rate is {market_growth:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Market Growth Rate was {market_growth:.3f}% rounded up or down as necessary.")
              print(f"Market Growth Rate is (this year's sales - last year's sales) divided by last year's sales in dollars.")
              print(f"In this case, that is {total_sales_dollars} - {last_year_sales} / {last_year_sales} * 100 to convert to a percent.")

# Segment Targeting
print()
print("Assume that your company will target a subset of the Market, Segment A. Find the Market Share then for your company.")
print(f"Your Company's total sales are ${my_sales_dollars:.2f}. Use the previous calculated number for this year's sales.")
segment_a = random.randint(50,99)
print(f"Segment A is {segment_a}% of the market.")
segment_a_dollars = segment_a / 100 * total_sales_dollars
my_ms_sega = my_sales_dollars / segment_a_dollars * 100

print()
user_my_ms_sega = float(input("Enter YOUR company's market share in Segment A as a percentage up to 2 decimal places: "))

my_ms_sega_low = my_ms_sega - 0.005
my_ms_sega_high = my_ms_sega + 0.005

if my_ms_sega_low < user_my_ms_sega < my_ms_sega_high:
    print(f"Correct! The Market Share for Your Company in Segment A is {my_ms_sega:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_my_ms_sega = float(input())
    if my_ms_sega_low < user_my_ms_sega < my_ms_sega_high:
         print(f"Correct! The Market Share for Your Company in Segment A is {my_ms_sega:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_my_ms_sega = float(input())
         if my_ms_sega_low < user_my_ms_sega < my_ms_sega_high:
              print(f"Correct! The Market Share for Your Company in Segment A is {my_ms_sega:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Market Share for Your Company in Segment A was {my_ms_sega:.3f}% rounded up or down as necessary.")
              print(f"Market Share within a segment is your sales in dollars divided by total sales in that segment in dollars.")
              print(f"Total sales in Segment A is Segment A's percent of the market / 100 * total market sales in dollars. ")
              print(f"In this case, that is {segment_a} / 100 * {total_sales_dollars} = {segment_a_dollars:.2f}.")
              print(f"Then, Market Share is {my_sales_dollars} / {segment_a_dollars:.2f} * 100 to convert to a percent.")

#Change Problem Values:
my_sales_units = random.randint(50000,100000)
lead_competition_sales_units = random.randint(200000, 400000)
competitor_sales_units = random.randint(8000, 20000)
total_sales_units = my_sales_units + lead_competition_sales_units + competitor_sales_units
market_size_units = total_sales_units

my_selling_price = random.randint(2, 10)
lead_selling_price =  random.randint(6, 18)
competitor_selling_price = random.randint(2,10)

change_in_sales = random.randint(1000, 100000)
plus_minus = random.randint(0,1)
if plus_minus == 0:
    change_in_sales = -change_in_sales

my_sales_dollars = my_sales_units * my_selling_price
lead_sales_dollars = lead_competition_sales_units * lead_selling_price
competitor_sales_dollars = competitor_sales_units * competitor_selling_price
total_sales_dollars = my_sales_dollars + lead_sales_dollars + competitor_sales_dollars

# Calculations Below for Changed Problem Values:
my_rel_ms = my_sales_dollars / lead_sales_dollars * 100
competitor_rel_ms = competitor_sales_dollars / lead_sales_dollars * 100


last_year_sales = total_sales_dollars + change_in_sales
market_growth = ((total_sales_dollars - last_year_sales) / last_year_sales) * 100

my_ms_dollars = my_sales_dollars / total_sales_dollars * 100
lead_ms_dollars = lead_sales_dollars / total_sales_dollars * 100
competitor_ms_dollars = competitor_sales_dollars / total_sales_dollars * 100

my_ms_units = my_sales_units / total_sales_units * 100
lead_ms_units = lead_competition_sales_units / total_sales_units * 100
competitor_ms_units = competitor_sales_units / total_sales_units * 100


# Missing Value Market Share and Size

# Units Problem Setup
print()
print(f"Company:\t\tSales (units)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t{my_sales_units}\t\t??")
print(f"Company B:\t\t{competitor_sales_units}\t\t??")
print(f"Lead Competitor:\t{lead_competition_sales_units}\t\t??")
print(f"Market Size (units):\t??\t\t100%")

# Market Size Units
print()
print("Assume only you, company B, and the lead competitor are in this industry.")
user_market_size_units = int(input("Enter the total market size in units here: "))

if user_market_size_units == market_size_units:
    print(f"Correct. The market size in units is {market_size_units} units.")
else:
    print("Try again.")
    user_market_size_units = int(input("Enter the total market size in units here: "))
    if user_market_size_units == market_size_units:
        print(f"Correct. The market size in units is {market_size_units} units.")
    else:
        print("Try again. Last try.")
        user_lead_sales_dollars = int(input("Enter the Lead Competitor's Total Sales to the nearest dollar: $"))
        if user_market_size_units == market_size_units:
            print(f"Correct. The market size in units is {market_size_units} units.")
        else:
            print(f"The correct market size in units was {market_size_units} units.")
            print("Add Your Company's sales in units to Company B's sales in Units to the Lead Competitor's sales in units.")
            print(f"In this case, that will be {my_sales_units} + {competitor_sales_units} * {lead_competition_sales_units}.")

print()
print("Updated version of the question:")
print()
print(f"Company:\t\tSales (units)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t{my_sales_units}\t\t??")
print(f"Company B:\t\t{competitor_sales_units}\t\t??")
print(f"Lead Competitor:\t{lead_competition_sales_units}\t\t??")
print(f"Market Size (units):\t{market_size_units}\t\t100%")

# Finding Your Market Share in Units
print()
user_my_ms_units = float(input("Enter YOUR company's market share in units as a percentage up to 2 decimal places: "))

my_ms_units_low = my_ms_units - 0.005
my_ms_units_high = my_ms_units + 0.005

if my_ms_units_low < user_my_ms_units < my_ms_units_high:
    print(f"Correct! Your Company's Market Share is {my_ms_units:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_my_ms_units = float(input())
    if my_ms_units_low < user_my_ms_units < my_ms_units_high:
         print(f"Correct! Your Company's Market Share is {my_ms_units:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_my_ms_units = float(input())
         if my_ms_units_low < user_my_ms_units < my_ms_units_high:
              print(f"Correct! Your Company's Market Share is {my_ms_units:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Market Share in units for Your Company was {my_ms_units:.3f}% rounded up or down as necessary.")
              print(f"The Market Share of Your Company is your sales in units divided by total sales in units.")
              print(f"In this case, that is {my_sales_units} / {market_size_units} * 100 to convert to a percent.")

print()
print("Updated version of the question:")
print()
print(f"Company:\t\tSales (units)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t{my_sales_units}\t\t{my_ms_units:.3f}%")
print(f"Company B:\t\t{competitor_sales_units}\t\t??")
print(f"Lead Competitor:\t{lead_competition_sales_units}\t\t??")
print(f"Market Size (units):\t{market_size_units}\t\t100%")

# Company B Market Share

print()
user_competitor_ms_units = float(input("Enter Company B's market share in units as a percentage up to 2 decimal places: "))

competitor_ms_units_low = competitor_ms_units - 0.005
competitor_ms_units_high = competitor_ms_units + 0.005

if competitor_ms_units_low < user_competitor_ms_units < competitor_ms_units_high:
    print(f"Correct! Company B's Market Share is {competitor_ms_units:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_competitor_ms_units = float(input())
    if competitor_ms_units_low < user_competitor_ms_units < competitor_ms_units_high:
         print(f"Correct! Company B's Market Share is {competitor_ms_units:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_competitor_ms_units = float(input())
         if competitor_ms_units_low < user_competitor_ms_units < competitor_ms_units_high:
              print(f"Correct! Company B's Market Share is {competitor_ms_units:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Market Share in units for Company B was {competitor_ms_units:.3f}% rounded up or down as necessary.")
              print(f"The Market Share of Company B is Company B's sales in units divided by total sales in units.")
              print(f"In this case, that is {competitor_sales_units} / {market_size_units} * 100 to convert to a percent.")

print()
print("Updated version of the question:")
print()
print(f"Company:\t\tSales (units)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t{my_sales_units}\t\t{my_ms_units:.3f}%")
print(f"Company B:\t\t{competitor_sales_units}\t\t{competitor_ms_units:.3f}%")
print(f"Lead Competitor:\t{lead_competition_sales_units}\t\t??")
print(f"Market Size (units):\t{market_size_units}\t\t100%")

# Lead Competitor Market Share

print()
user_lead_ms_units = float(input("Enter the Lead Competitor's market share in units as a percentage up to 2 decimal places: "))

lead_ms_units_low = lead_ms_units - 0.005
lead_ms_units_high = lead_ms_units + 0.005

if lead_ms_units_low < user_lead_ms_units < lead_ms_units_high:
    print(f"Correct! The Lead Competitor's Market Share is {lead_ms_units_units:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_lead_ms_units = float(input())
    if lead_ms_units_low < user_lead_ms_units < lead_ms_units_high:
         print(f"Correct! The Lead Competitor's Market Share is {lead_ms_units_units:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_lead_ms_units = float(input())
         if lead_ms_units_low < user_lead_ms_units < lead_ms_units_high:
              print(f"Correct! The Lead Competitor's Market Share is {lead_ms_units_units:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Market Share in units for the Lead Competitor was {lead_ms_units:.3f}% rounded up or down as necessary.")
              print(f"The Market Share of the Lead Competitor is the Lead Competitor's sales in units divided by total sales in units.")
              print(f"In this case, that is {lead_competition_sales_units} / {market_size_units} * 100 to convert to a percent.")

print()
print("Completed version of the question:")
print()
print(f"Company:\t\tSales (units)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t{my_sales_units}\t\t{my_ms_units:.3f}%")
print(f"Company B:\t\t{competitor_sales_units}\t\t{competitor_ms_units:.3f}%")
print(f"Lead Competitor:\t{lead_competition_sales_units}\t\t{lead_ms_units:.3f}%")
print(f"Market Size (units):\t{market_size_units}\t\t100%")
print("Good job!")

# Dollars Problem Setup

print()
print(f"Company:\t\tSales ($)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t${my_sales_dollars}\t\t{my_ms_dollars:.2f}%")
print(f"Company B:\t\t??\t\t{competitor_ms_dollars:.2f}%")
print(f"Lead Competitor:\t??\t\t{lead_ms_dollars:.2f}%")
print(f"Market Size ($):\t??\t\t100%")
print()

# Company B Sales Dollars
user_competitor_sales_dollars = int(input("Enter Company B's Total Sales to the nearest dollar: $"))

if user_competitor_sales_dollars == competitor_sales_dollars:
    print(f"Correct! The total sales of Company B was this year is ${competitor_sales_dollars}.")
else:
    print("Try again.")
    user_competitor_sales_dollars = int(input("Enter Company B's Total Sales to the nearest dollar: $"))
    if user_competitor_sales_dollars == competitor_sales_dollars:
        print(f"Correct! The total sales of Company B was this year is ${competitor_sales_dollars}.")
    else:
        print("Try again. Last try.")
        user_competitor_sales_dollars = int(input("Enter Company B's Total Sales to the nearest dollar: $"))
        if user_competitor_sales_dollars == competitor_sales_dollars:
            print(f"Correct! The total sales of Company B was this year is ${competitor_sales_dollars}.")
        else:
            print(f"The correct Company B's Sales in dollars was ${competitor_sales_dollars:.3f} (3 decimals for you to check your rounding).")
            print("Divide Your Company's sales in dollars by the percent market share to figure out how many $ = 1% market share. ")
            print("Multiply this number by the percent of Company B to find Company B's Sales in dollars.")
            print(f"In this case, that will be {my_sales_dollars} / {my_ms_dollars} * {competitor_ms_dollars:.3f}.")

print()
print("Updated Version of the Question:")
print()
print(f"Company:\t\tSales ($)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t${my_sales_dollars}\t\t{my_ms_dollars:.2f}%")
print(f"Company B:\t\t{competitor_sales_dollars}\t\t{competitor_ms_dollars:.2f}%")
print(f"Lead Competitor:\t??\t\t{lead_ms_dollars:.2f}%")
print(f"Market Size ($):\t??\t\t100%")
print()

# Lead Competitor Sales Dollars

user_lead_sales_dollars = int(input("Enter the Lead Competitor's Total Sales to the nearest dollar: $"))

if user_lead_sales_dollars == lead_sales_dollars:
    print(f"Correct! The total sales of the Lead Competitor was this year is ${lead_sales_dollars}.")
else:
    print("Try again.")
    user_lead_sales_dollars = int(input("Enter the Lead Competitor's Total Sales to the nearest dollar: $"))
    if user_lead_sales_dollars == lead_sales_dollars:
        print(f"Correct! The total sales of the Lead Competitor was this year is ${lead_sales_dollars}.")
    else:
        print("Try again. Last try.")
        user_lead_sales_dollars = int(input("Enter the Lead Competitor's Total Sales to the nearest dollar: $"))
        if user_lead_sales_dollars == lead_sales_dollars:
            print(f"Correct! The total sales of the Lead Competitor was this year is ${lead_sales_dollars}.")
        else:
            print(f"The correct sales in dollars of the Lead Competitor was ${lead_sales_dollars} (3 decimals for you to check your rounding).")
            print("Divide Your Company's sales in dollars by the percent market share to figure out how many $ = 1% market share. ")
            print("Multiply this number by the percent of Company B to find Company B's Sales in dollars.")
            print(f"In this case, that will be {my_sales_dollars} / {my_ms_dollars} * {lead_ms_dollars:}.")

print()
print("Updated Version of the Question:")
print()
print(f"Company:\t\tSales ($)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t${my_sales_dollars}\t\t{my_ms_dollars:.2f}%")
print(f"Company B:\t\t{competitor_sales_dollars}\t\t{competitor_ms_dollars:.2f}%")
print(f"Lead Competitor:\t{lead_sales_dollars}\t\t{lead_ms_dollars:.2f}%")
print(f"Market Size ($):\t??\t\t100%")
print()

# Market Size

user_total_sales = int(input("Input the market size: $"))

if user_total_sales == total_sales_dollars:
    print(f"Correct! The market size of the industry in dollars for this year is ${total_sales_dollars}.")
else:
    print("Try again.")
    user_total_sales = float(input("$"))
    if user_total_sales == total_sales_dollars:
        print(f"Correct! The market size of the industry in dollars for this year is ${total_sales_dollars}.")
    else:
        print("Try again. Last try.")
        user_total_sales = float(input("$"))
        if user_total_sales == total_sales_dollars:
            print(f"Correct! The market size of the industry in dollars for this year is ${total_sales_dollars}.")
        else:
            print(f"The correct market size was ${total_sales_dollars}.")
            print(f"This is Your Company's sales {my_sales_dollars} + Company B's Sales {competitor_sales_dollars} + Lead Competitor's Sales {lead_sales_dollars}")

print()
print("Completed Version of the Question:")
print()
print(f"Company:\t\tSales ($)\tMarket Share %")
print("_" * 50)
print(f"Your Company:\t\t${my_sales_dollars}\t\t{my_ms_dollars:.2f}%")
print(f"Company B:\t\t{competitor_sales_dollars}\t\t{competitor_ms_dollars:.2f}%")
print(f"Lead Competitor:\t{lead_sales_dollars}\t\t{lead_ms_dollars:.2f}%")
print(f"Market Size ($):\t{total_sales_dollars}\t\t100%")
print()
print("Good job!")
