print("Welcome to Break Even Analysis Practice")

import random
import math

# Intialize class Unit to store unit probolem values.
class Unit():
    def __init__(self):
        self.vc = round(random.uniform(2, 100), 2)
        self.profit = round(random.randint(1, 15), 2)
        self.fc = round(random.randint(1, 15), 2)
        self.selling_price = round(self.vc + self.fc + self.profit, 2)

unit = Unit()

# Initialize Class Total to store total problem values.
class Total():
    def __init__(self):
        self.expected_sales = random.randint(1000, 300000)
        self.total_fc = round(unit.fc * self.expected_sales, 2)
        self.total_revenue = round(unit.selling_price * self.expected_sales)
        # Market size must be greater than or equal to the revenue of the company thus the multiplication by a
        # Random number between 1 and 1000 to create the market size from the company's revenue.
        self.market_size = round((random.uniform(1,1000) * self.total_revenue), 2)

total = Total()

# Intialize class to store problem answers.
class ProblemAnswers():
    def __init__(self):
        self.be_units = math.ceil(total.fc / (unit.selling_price - unit.vc))
        self.be_dollars = round(self.be_units * unit.selling_price, 2)
        self.be_ms = self.be_dollars / total.market_size
        self.be_selling_price = round(total.fc / total.expected_sales + unit.vc, 2) 
        # Should be equal to unit.selling_price but to prevent any rounding issues the math is done here.

answers = ProblemAnswwers()

# REVISIONS UP UNTIL THIS LINE. MUST ADD BACK OTHER CLASSES AND FUNCTIONS FOR ANSWERING / INTERFACE!

print("Values to be used in the Break Even UNITS problem:")
print(f"Unit Variable Cost: ${unit.vc}\nTotal Fixed Cost: ${total.fc}")
print(f"Unit Selling Price: ${unit.selling_price}")

# Find break-even units.
print()
be_units_raw = total_fc / (selling_price - unit_vc)
be_units = math.ceil(total_fc / (selling_price - unit_vc))
user_be_units = int(input("Enter the number of units the company must sell to break even (round up to whole number): "))

if user_be_units == be_units:
    print(f"Correct! The Break Even number is {be_units_raw:.1f} units (1 decimal place for reference).")
else:
    print("Try again.")
    user_be_units = float(input())
    if user_be_units == be_units:
         print(f"Correct! The Break Even number is {be_units_raw:.1f} units (1 decimal place for reference).")
    else:
         print("Try again. Last try.")
         user_be_units = float(input())
         if user_be_units == be_units:
              print(f"Correct! The Break Even number is {be_units_raw:.1f} units (1 decimal place for reference).")
         else:
              print(f"The correct Break Even number was {be_units_raw:.1f} units rounded up to a whole number.")
              print(f"The break even number is total fixed costs / unit selling price - variable costs per unit")
              print(f"This means ${total_fc} / {selling_price} + ${unit_vc} in this case.")

# Find Break even units in total amount of dollars:
print()
be_dollars = be_units * selling_price
user_be_dollars = float(input("Enter the total amount of sales revenue that the company needs to break even: $"))
be_dollars_low = be_dollars - 0.005
be_dollars_high = be_dollars + 0.005

if be_dollars_low < user_be_dollars < be_dollars_high:
    print(f"Correct! The Break Even total revenue is ${be_dollars:.3f} (3 decimal places for reference).")
else:
    print("Try again.")
    user_be_dollars = float(input("$"))
    if be_dollars_low < user_be_dollars < be_dollars_high:
         print(f"Correct! The Break Even total revenue is ${be_dollars:.3f} (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_be_dollars = float(input("$"))
         if be_dollars_low < user_be_dollars < be_dollars_high:
              print(f"Correct! The Break Even total revenue is ${be_dollars:.3f} (3 decimal places for reference).")
         else:
              print(f"The correct Break Even total revenue was ${be_dollars:.3f} rounded up or down as necessary.")
              print(f"Break even total revenue is Break Even Units * Selling Price of each unit")
              print(f"This means ${be_units} * ${selling_price} in this case.")

# Break Even Market Share
print()
market_size = float(str(random.randint(1,1000)) + "." + str(random.randint(0,9)))
market_size = market_size * be_dollars
be_ms = be_dollars / market_size * 100
be_ms_high = be_ms + 0.005
be_ms_low = be_ms - 0.005

print(f"Assume that the total market share is ${market_size:.2f}")
user_be_ms = float(input("Input the market share the company needs to capture to break even as a percentage: "))

if be_ms_low < user_be_ms < be_ms_high:
    print(f"Correct! The Break Even market share is {be_ms:.3f}% (3 decimal places for reference).")
else:
    print("Try again.")
    user_be_ms = float(input())
    if be_ms_low < user_be_ms < be_ms_high:
         print(f"Correct! The Break Even market share is {be_ms:.3f}% (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_be_ms = float(input())
         if be_ms_low < user_be_ms < be_ms_high:
              print(f"Correct! The Break Even market share is {be_ms:.3f}% (3 decimal places for reference).")
         else:
              print(f"The correct Break Even market share was {be_ms:.3f}% rounded up or down as necessary.")
              print(f"Break even selling price is Break Even Sales Revenue / Total Market Sales")
              print(f"This means ${be_dollars} / ${market_size:.2f} in this case.")

# Set up for break-even selling price:
print()
random_number = random.randint(1,100)

unit2 = Unit()
total2 = Total()
answers2 = Answers()

print("Values to be used in the Break Even PRICING problem:")
print(f"Unit Variable Cost: ${unit_vc}\nTotal Fixed Cost: ${total_fc}")
print(f"Units sold: {expected_sales}")

# Find break-even selling price:
print()
selling_price = (total_fc / be_units) + unit_vc
user_selling_price = float(input("Enter the price at which the company must sell to break even (round UP to 2 decimals): $"))

selling_price_low = selling_price - 0.005
selling_price_high = selling_price + 0.005

if selling_price_low < user_selling_price < selling_price_high:
    print(f"Correct! The Break Even selling price is ${selling_price:.3f} (3 decimal places for reference).")
else:
    print("Try again.")
    user_selling_price = float(input("$"))
    if selling_price_low < user_selling_price < selling_price_high:
         print(f"Correct! The Break Even selling price is ${selling_price:.3f} (3 decimal places for reference).")
    else:
         print("Try again. Last try.")
         user_selling_price = float(input("$"))
         if selling_price_low < user_selling_price < selling_price_high:
              print(f"Correct! The Break Even selling price is ${selling_price:.3f} (3 decimal places for reference).")
         else:
              print(f"The correct Break Even selling price per unit was ${selling_price:.3f} rounded up or down as necessary.")
              print(f"Break even selling price is total fixed costs / expected sales + variable costs per unit")
              print(f"This means ${total_fc} / {expected_sales} + ${unit_vc} in this case.")
